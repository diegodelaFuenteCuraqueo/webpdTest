<!doctype HTML>

<html>
  <head>
    <meta charset="utf-8">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script url="lib/pd-fileutils.js"></script>
    <script src="lib/webpd-latest.js"></script>
    <script src="lib/examples.js"></script>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <script src="scripts/script1.js"></script>

  <!-- <link href='/lib/examples.css' rel='stylesheet' type='text/css'> -->
  <link href='styles/style1.css' rel='stylesheet' type='text/css'>

  </head> 

  <body>

    <H1 align="center"> PD TEST1 </H1>

    <div class="container center_div">
      <div id="loading">Loading ...</div>
      <button id="startButton">Start</button> <!-- este boton es jodidamente misterioso...-->
    </div>

    <div class="container center_div">
      <button id="nuevasNotas" name="nuevasNotas" value="nuevasNotas" onclick="nuevasNotas()">nuevasNotas</button>
      <input type="range" name="amp" id="amp" min="0.0" max="2.2" step="0.01">
      <label for="amp" id="ampLabel">Amp: </label>
    </div>

    <div class="container center_div">
      <button id="grabarArray" name="grabarArray" value="grabarArray" onclick="grabarArray()">grabarArray</button>
      <button id="leerArray" name="leerArray" value="leerArray" onclick="leerArray()">leerArray</button>
      <input type="range" name="ampArray" id="ampArray" min="0.0" max="2.2" step="0.01">
      <label for="amp" id="ampArrayLabel">AmpArray: </label>
    </div>



<!--Patch con osciladores-->
    <div class="container center_div">
      <h2>Osciladores c/ glissandos</h2>

      <div class=row>  

        <div class="col">
          <button id="nuevasNotas" name="nuevasNotas" value="nuevasNotas" onclick="nuevasNotas()">nuevasNotas</button>
          <input type="range" name="amp" id="amp" min="0.0" max="2.2" step="0.01">
          <label for="amp" id="ampLabel">Amp: </label>

          <div class="row">
            <p>El botón nuevasNotas genera alturas aleatorias para dos [osc~] (L y R). El slider controla la intensidad de los osciladores</p>
          </div>

        </div>

        <div class="col">
          <code>
            $(document).on('input', '#amp', function() {<br>
            &nbsp; &nbsp;let rangeAmp = $('#amp').val() ;<br>
            &nbsp; &nbsp;Pd.send("amp", [ parseFloat(rangeAmp) ] );<br>
            &nbsp; &nbsp;console.log(rangeAmp+" -> [r amp]");<br>
            &nbsp; &nbsp;setAmpLabel(rangeAmp);<br>
            });<br>
            function setAmpLabel (ampi){<br>
            &nbsp; &nbsp;$("#ampLabel").empty();<br>
            &nbsp; &nbsp;$("#ampLabel").append("Amp: "+ampi);<br>
            }<br>
          </code>
        </div>


      </div>
    </div>

    <!--Patch con array (aun no logro grabar desde el browser-->
    <div class="container center_div">
      <h2>Arrays (aún no logro grabar dsd el browser)</h2>
      <div class="row">
        <div class="col"> 
          <button id="grabarArray" name="grabarArray" value="grabarArray" onclick="grabarArray()">grabarArray</button>
          <button id="leerArray" name="leerArray" value="leerArray" onclick="leerArray()">leerArray</button>
          <input type="range" name="ampArray" id="ampArray" min="0.0" max="2.2" step="0.01">
          <label for="amp" id="ampArrayLabel">AmpArray: </label>

          <div class="row">
            <p>El botón grabar array está vinculado a un objeto [r grabarArray] que activa un bang, el que a su vez está conectado a un objeto [tabwrite~ array1]*. EL slider controla la amplitud del [tabread4~ array1]</p>
            <small>*parece q este objeto está fallando o algo así...</small>
          </div>
        </div>

        <div class = "col">
          <code>
            function leerArray(){ <br>
             &nbsp; &nbsp;Pd.send("leerArray", "bang" );<br>
            } <br>
            function grabarArray(){<br>
             &nbsp; &nbsp;Pd.send("grabarArray", "bang");<br>
            }    <br>
            $(document).on('input', '#ampArray', function() {<br>
              &nbsp; &nbsp;let rangeAmp = $('#ampArray').val() ;<br>
              &nbsp; &nbsp;Pd.send("ampArray", [ parseFloat(rangeAmp) ] );<br>
              &nbsp; &nbsp;console.log(rangeAmp+" -> [r ampArray]");<br>
              &nbsp; &nbsp;ampArrayLabel(rangeAmp);<br>
            });<br>
            function ampArrayLabel (ampi){<br>
              &nbsp; &nbsp;$("#ampArrayLabel").empty();<br>
              &nbsp; &nbsp;$("#ampArrayLabel").append("ampArray: "+ampi);<br>
            }<br>
          </code>
        </div>

      </div>
    </div>
  </body>
</html>